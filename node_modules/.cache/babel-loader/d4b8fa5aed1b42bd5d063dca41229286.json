{"ast":null,"code":"var _jsxFileName = \"/home/jorg/Downloads/REPOSITORIOS UD/proyecto_frontend_v0.7.0/gestion_inventarios_frontend-develop/src/pages/Notifications/notifications.js\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col, Spinner } from 'reactstrap';\nimport { activateAuthLayout } from '../../store/actions';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { getNotificaciones, getNotificacionesOrigen, getNotificacionesAprobador } from './../../helpers/fetch';\nimport { getLoggedInUser } from './../../helpers/authUtils';\nimport NotificacionesTable from './../Tables/notificacionesTable';\n\nclass Notifications extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      Notificaciones: [],\n      user: getLoggedInUser()\n    };\n    this.fetchNotificaciones = this.fetchNotificaciones.bind(this);\n  }\n\n  async componentDidMount() {\n    await this.fetchNotificaciones();\n  }\n\n  async fetchNotificaciones() {\n    const {\n      user\n    } = this.state;\n\n    try {\n      let result;\n\n      if (Number(user.auth.rol.id) === 4) {\n        result = await getNotificacionesOrigen({\n          fk_usuario: user.id\n        });\n      }\n\n      if (Number(user.auth.rol.id) === 2) {\n        result = await getNotificacionesAprobador({\n          fk_usuario: user.id\n        });\n      } else {\n        result = await getNotificaciones({\n          fk_usuario: user.id\n        });\n      }\n\n      const data = result.data.notificaciones;\n\n      if (data.length === 0) {\n        alert('No tiene notificaciones en este momento');\n        this.props.history.push('/');\n      }\n\n      this.setState({\n        Notificaciones: data,\n        loading: false\n      });\n    } catch (error) {\n      console.log(error);\n      alert('Error en el servidor');\n    }\n  }\n\n  render() {\n    const {\n      loading,\n      Notificaciones,\n      user\n    } = this.state;\n    const idRol = Number(user.auth.rol.id);\n    return (\n      /*#__PURE__*/\n      React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"page-title-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Row, {\n        className: \"align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h3\", {\n        className: \"page-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 33\n        }\n      }, \"NOTIFICACIONES\")))),\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }\n      }, loading ?\n      /*#__PURE__*/\n      React.createElement(Spinner, {\n        color: \"info\",\n        style: {\n          width: '3rem',\n          height: '3rem',\n          marginLeft: '45%',\n          margingRight: '45%'\n        },\n        type: \"grow\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 29\n        }\n      }) :\n      /*#__PURE__*/\n      React.createElement(NotificacionesTable, {\n        Notificaciones: Notificaciones,\n        props: this.props,\n        idRol: idRol,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 29\n        }\n      }))))\n    );\n  }\n\n}\n\nexport default withRouter(connect(null, {\n  activateAuthLayout\n})(Notifications));","map":{"version":3,"sources":["/home/jorg/Downloads/REPOSITORIOS UD/proyecto_frontend_v0.7.0/gestion_inventarios_frontend-develop/src/pages/Notifications/notifications.js"],"names":["React","Component","Container","Row","Col","Spinner","activateAuthLayout","withRouter","connect","getNotificaciones","getNotificacionesOrigen","getNotificacionesAprobador","getLoggedInUser","NotificacionesTable","Notifications","constructor","props","state","loading","Notificaciones","user","fetchNotificaciones","bind","componentDidMount","result","Number","auth","rol","id","fk_usuario","data","notificaciones","length","alert","history","push","setState","error","console","log","render","idRol","width","height","marginLeft","margingRight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Row, Col, Spinner } from 'reactstrap';\nimport { activateAuthLayout } from '../../store/actions';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { getNotificaciones, getNotificacionesOrigen, getNotificacionesAprobador } from './../../helpers/fetch'\nimport { getLoggedInUser } from './../../helpers/authUtils'\nimport NotificacionesTable from './../Tables/notificacionesTable'\n\nclass Notifications extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            Notificaciones: [],\n            user: getLoggedInUser(),\n        };\n        this.fetchNotificaciones = this.fetchNotificaciones.bind(this)\n    }\n\n    async componentDidMount() {\n       await this.fetchNotificaciones()\n    }\n\n    async fetchNotificaciones() {\n        const { user } = this.state\n        try {\n            let result\n            if(Number(user.auth.rol.id) === 4) {\n                result = await getNotificacionesOrigen({fk_usuario: user.id})\n            }\n            if(Number(user.auth.rol.id) === 2) {\n                result = await getNotificacionesAprobador({fk_usuario: user.id})\n            }\n            else {\n                result = await getNotificaciones({fk_usuario: user.id})\n            }\n            const data = result.data.notificaciones\n            if(data.length === 0) {\n                alert('No tiene notificaciones en este momento')\n                this.props.history.push('/')\n            }\n            this.setState({ Notificaciones: data, loading: false})\n        } catch (error) {\n            console.log(error);\n            alert('Error en el servidor')\n        }\n    }\n\n    render() {\n        const { loading, Notificaciones, user} = this.state\n        const idRol = Number(user.auth.rol.id)\n        return (\n            <React.Fragment>\n                <Container fluid>\n                    <div className=\"page-title-box\">\n                        <Row className=\"align-items-center\">\n                            <Col sm=\"12\">\n                                <h3 className=\"page-title\">NOTIFICACIONES</h3>                                \n                            </Col>\n                        </Row>\n                    </div>\n\n                    <Row>\n                        { loading ?\n                            <Spinner color=\"info\" style={{ width: '3rem', height: '3rem', marginLeft: '45%', margingRight: '45%' }} type=\"grow\" /> :\n                            <NotificacionesTable Notificaciones={Notificaciones} props={this.props} idRol={idRol}></NotificacionesTable>\n                        }\n                    </Row>\n                </Container>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default withRouter(connect(null, { activateAuthLayout })(Notifications));"]},"metadata":{},"sourceType":"module"}