{"ast":null,"code":"var _jsxFileName = \"/home/jorg/Downloads/REPOSITORIOS UD/proyecto_frontend_v0.7.0/gestion_inventarios_frontend-develop/src/pages/Tables/Bienes.js\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col, Card, CardBody, Button, Modal, ModalFooter } from 'reactstrap';\nimport { MDBDataTableV5 } from 'mdbreact';\nimport { bienColumns } from './columnsData';\nimport { update_bien } from './../../helpers/fetch';\nimport ModalUpdateBien from './../Modals/modalUpdateBien';\n\nclass BienesTable extends Component {\n  constructor(props) {\n    super(props);\n\n    this.changeStateBien = async () => {\n      const {\n        data,\n        idRolTable,\n        bien\n      } = this.state;\n      if (idRolTable === 1) data.fk_estado = 7;\n      data.descripcion = bien.descripcion;\n      data.espacio_fisico = bien.espacio_fisico;\n      data.observaciones = bien.observaciones;\n\n      try {\n        this.setState({\n          modalConfirm: false\n        });\n        await update_bien(data);\n        alert('Actualización correcta');\n        this.props.update(this.props.idRol);\n      } catch (er) {\n        alert('Error en el servidor');\n      }\n    };\n\n    this.state = {\n      BienesData: props.Bienes,\n      Bienes: [],\n      modalConfirm: false,\n      confirm: false,\n      modal: false,\n      loading: false,\n      descripcion: '',\n      espacio_fisico: '',\n      observaciones: '',\n      idBien: '',\n      idEstado: '',\n      data: null,\n      idRolTable: '',\n      bien: null\n    };\n    this.changeStateBien = this.changeStateBien.bind(this);\n    this.updateBien = this.updateBien.bind(this);\n    this.openModal = this.openModal.bind(this);\n    this.modalConfimation = this.modalConfimation.bind(this);\n    this.callbackModal = this.callbackModal.bind(this);\n    this.toggleModal = this.toggleModal.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      Bienes\n    } = this.props;\n    this.setState({\n      Bienes\n    });\n  }\n\n  async updateBien(dataForm) {\n    try {\n      await update_bien(dataForm);\n      this.props.update(this.props.idRol);\n      alert('Bien actualizado');\n    } catch {\n      alert('Error en el servidor');\n    }\n  }\n\n  openModal(data) {\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      data\n    }));\n  }\n\n  modalConfimation(data, idRol, bien) {\n    this.setState({\n      data,\n      idRolTable: idRol,\n      bien,\n      modalConfirm: true\n    });\n  }\n\n  callbackModal() {\n    this.setState({\n      modal: false\n    });\n  }\n\n  toggleModal() {\n    this.setState(prevState => ({\n      modalConfirm: !prevState.modal\n    }));\n  }\n\n  render() {\n    const {\n      idRol,\n      Bienes\n    } = this.props;\n    let columns = bienColumns;\n    let rows = [];\n\n    if (idRol === 4) {\n      columns = columns.slice(0, columns.length - 2);\n    }\n\n    Bienes.forEach(data => {\n      if (data.usuario) {\n        if (idRol === 1 || idRol === 2) {\n          rows.push({\n            placa: data.placa ? data.placa : '-',\n            descripcion: data.descripcion ? data.descripcion : '-',\n            sede: data.usuario.dependencia.sede.sede ? data.usuario.dependencia.sede.sede : '-',\n            espacio_fisico: data.espacio_fisico ? data.espacio_fisico : '-',\n            dependencia: data.usuario.dependencia.dependencia ? data.usuario.dependencia.dependencia : '-',\n            observaciones: data.observaciones ? data.observaciones : 'Ninguna',\n            actualizar: idRol === 4 ? '' :\n            /*#__PURE__*/\n            React.createElement(\"button\", {\n              className: \"btn btn-primary rounded-pill\",\n              onClick: () => this.openModal(data),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 56\n              }\n            }, \"Actualizar\")\n          });\n        } else {\n          rows.push({\n            placa: data.placa ? data.placa : '-',\n            descripcion: data.descripcion ? data.descripcion : '-',\n            sede: data.usuario.dependencia.sede.sede ? data.usuario.dependencia.sede.sede : '-',\n            espacio_fisico: data.espacio_fisico ? data.espacio_fisico : '-',\n            dependencia: data.usuario.dependencia.dependencia ? data.usuario.dependencia.dependencia : '-',\n            observaciones: data.observaciones ? data.observaciones : 'Ninguna'\n          });\n        }\n      }\n    });\n    const data = {\n      columns,\n      rows\n    };\n    return (\n      /*#__PURE__*/\n      React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 33\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(MDBDataTableV5, {\n        responsive: true,\n        bordered: true,\n        fullPagination: true,\n        infoLabel: ['', '-', 'de', ''],\n        data: data,\n        searchTop: true,\n        searchBottom: false,\n        noRecordsFoundLabel: 'No se encontraron resultados',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 37\n        }\n      }))), this.state.modal ?\n      /*#__PURE__*/\n      React.createElement(ModalUpdateBien, {\n        callback: this.updateBien,\n        modal: this.state.modal,\n        callbackModal: this.callbackModal,\n        data: this.state.data,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 33\n        }\n      }) :\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 165\n        }\n      }))),\n      /*#__PURE__*/\n      React.createElement(Modal, {\n        isOpen: this.state.modalConfirm,\n        toggle: this.toggleModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"modal-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h5\", {\n        className: \"modal-title mt-0\",\n        id: \"confirmacion\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 29\n        }\n      }, \"\\xBFEstas seguro de realizar esta acci\\xF3n?\"),\n      /*#__PURE__*/\n      React.createElement(\"button\", {\n        type: \"button\",\n        onClick: () => this.setState({\n          modalConfirm: false\n        }),\n        className: \"close\",\n        \"data-dismiss\": \"modal\",\n        \"aria-label\": \"Close\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 33\n        }\n      }, \"\\xD7\"))),\n      /*#__PURE__*/\n      React.createElement(ModalFooter, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Button, {\n        type: \"button\",\n        color: \"secondary\",\n        onClick: () => this.setState({\n          modalConfirm: false\n        }),\n        className: \"waves-effect\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 29\n        }\n      }, \"Close\"),\n      /*#__PURE__*/\n      React.createElement(Button, {\n        type: \"button\",\n        color: \"primary\",\n        className: \"waves-effect waves-light\",\n        onClick: this.changeStateBien,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 29\n        }\n      }, \"Confimar\")))))\n    );\n  }\n\n}\n\nexport default BienesTable;","map":{"version":3,"sources":["/home/jorg/Downloads/REPOSITORIOS UD/proyecto_frontend_v0.7.0/gestion_inventarios_frontend-develop/src/pages/Tables/Bienes.js"],"names":["React","Component","Container","Row","Col","Card","CardBody","Button","Modal","ModalFooter","MDBDataTableV5","bienColumns","update_bien","ModalUpdateBien","BienesTable","constructor","props","changeStateBien","data","idRolTable","bien","state","fk_estado","descripcion","espacio_fisico","observaciones","setState","modalConfirm","alert","update","idRol","er","BienesData","Bienes","confirm","modal","loading","idBien","idEstado","bind","updateBien","openModal","modalConfimation","callbackModal","toggleModal","componentDidMount","dataForm","prevState","render","columns","rows","slice","length","forEach","usuario","push","placa","sede","dependencia","actualizar"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoCC,QAApC,EAA8CC,MAA9C,EAAsDC,KAAtD,EAA6DC,WAA7D,QAAgF,YAAhF;AACA,SAASC,cAAT,QAA+B,UAA/B;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,WAAT,QAA4B,uBAA5B;AACA,OAAOC,eAAP,MAA4B,6BAA5B;;AAEA,MAAMC,WAAN,SAA0Bb,SAA1B,CAAoC;AAChCc,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAmCnBC,eAnCmB,GAmCD,YAAY;AAC1B,YAAM;AAAEC,QAAAA,IAAF;AAAQC,QAAAA,UAAR;AAAoBC,QAAAA;AAApB,UAA6B,KAAKC,KAAxC;AACA,UAAIF,UAAU,KAAK,CAAnB,EAAsBD,IAAI,CAACI,SAAL,GAAiB,CAAjB;AACtBJ,MAAAA,IAAI,CAACK,WAAL,GAAmBH,IAAI,CAACG,WAAxB;AACAL,MAAAA,IAAI,CAACM,cAAL,GAAsBJ,IAAI,CAACI,cAA3B;AACAN,MAAAA,IAAI,CAACO,aAAL,GAAqBL,IAAI,CAACK,aAA1B;;AAEA,UAAI;AACA,aAAKC,QAAL,CAAc;AAAEC,UAAAA,YAAY,EAAE;AAAhB,SAAd;AACA,cAAMf,WAAW,CAACM,IAAD,CAAjB;AACAU,QAAAA,KAAK,CAAC,wBAAD,CAAL;AACA,aAAKZ,KAAL,CAAWa,MAAX,CAAkB,KAAKb,KAAL,CAAWc,KAA7B;AAEH,OAND,CAME,OAAOC,EAAP,EAAW;AACTH,QAAAA,KAAK,CAAC,sBAAD,CAAL;AACH;AACJ,KAnDkB;;AAEf,SAAKP,KAAL,GAAa;AACTW,MAAAA,UAAU,EAAEhB,KAAK,CAACiB,MADT;AAETA,MAAAA,MAAM,EAAE,EAFC;AAGTN,MAAAA,YAAY,EAAE,KAHL;AAITO,MAAAA,OAAO,EAAE,KAJA;AAKTC,MAAAA,KAAK,EAAE,KALE;AAMTC,MAAAA,OAAO,EAAE,KANA;AAQTb,MAAAA,WAAW,EAAE,EARJ;AASTC,MAAAA,cAAc,EAAE,EATP;AAUTC,MAAAA,aAAa,EAAE,EAVN;AAWTY,MAAAA,MAAM,EAAE,EAXC;AAYTC,MAAAA,QAAQ,EAAE,EAZD;AAcTpB,MAAAA,IAAI,EAAE,IAdG;AAeTC,MAAAA,UAAU,EAAE,EAfH;AAgBTC,MAAAA,IAAI,EAAE;AAhBG,KAAb;AAkBA,SAAKH,eAAL,GAAuB,KAAKA,eAAL,CAAqBsB,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKE,SAAL,GAAiB,KAAKA,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKG,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBH,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKI,aAAL,GAAqB,KAAKA,aAAL,CAAmBJ,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKK,WAAL,GAAmB,KAAKA,WAAL,CAAiBL,IAAjB,CAAsB,IAAtB,CAAnB;AACH;;AAEDM,EAAAA,iBAAiB,GAAG;AAChB,UAAM;AAAEZ,MAAAA;AAAF,QAAa,KAAKjB,KAAxB;AACA,SAAKU,QAAL,CAAc;AACVO,MAAAA;AADU,KAAd;AAGH;;AAoBD,QAAMO,UAAN,CAAiBM,QAAjB,EAA2B;AACvB,QAAI;AACA,YAAMlC,WAAW,CAACkC,QAAD,CAAjB;AACA,WAAK9B,KAAL,CAAWa,MAAX,CAAkB,KAAKb,KAAL,CAAWc,KAA7B;AACAF,MAAAA,KAAK,CAAC,kBAAD,CAAL;AACH,KAJD,CAIE,MAAM;AACJA,MAAAA,KAAK,CAAC,sBAAD,CAAL;AACH;AACJ;;AAGDa,EAAAA,SAAS,CAACvB,IAAD,EAAO;AACZ,SAAKQ,QAAL,CAAcqB,SAAS,KAAK;AACxBZ,MAAAA,KAAK,EAAE,CAACY,SAAS,CAACZ,KADM;AAExBjB,MAAAA;AAFwB,KAAL,CAAvB;AAIH;;AAEDwB,EAAAA,gBAAgB,CAACxB,IAAD,EAAOY,KAAP,EAAcV,IAAd,EAAoB;AAChC,SAAKM,QAAL,CAAc;AAAER,MAAAA,IAAF;AAAQC,MAAAA,UAAU,EAAEW,KAApB;AAA2BV,MAAAA,IAA3B;AAAiCO,MAAAA,YAAY,EAAE;AAA/C,KAAd;AACH;;AAEDgB,EAAAA,aAAa,GAAG;AACZ,SAAKjB,QAAL,CAAc;AAAES,MAAAA,KAAK,EAAE;AAAT,KAAd;AACH;;AAEDS,EAAAA,WAAW,GAAG;AACV,SAAKlB,QAAL,CAAcqB,SAAS,KAAK;AACxBpB,MAAAA,YAAY,EAAE,CAACoB,SAAS,CAACZ;AADD,KAAL,CAAvB;AAGH;;AAGDa,EAAAA,MAAM,GAAG;AACL,UAAM;AAAElB,MAAAA,KAAF;AAASG,MAAAA;AAAT,QAAoB,KAAKjB,KAA/B;AACA,QAAIiC,OAAO,GAAGtC,WAAd;AACA,QAAIuC,IAAI,GAAG,EAAX;;AAEA,QAAIpB,KAAK,KAAK,CAAd,EAAiB;AACbmB,MAAAA,OAAO,GAAGA,OAAO,CAACE,KAAR,CAAc,CAAd,EAAiBF,OAAO,CAACG,MAAR,GAAiB,CAAlC,CAAV;AACH;;AAEDnB,IAAAA,MAAM,CAACoB,OAAP,CAAenC,IAAI,IAAI;AACnB,UAAIA,IAAI,CAACoC,OAAT,EAAkB;AACd,YAAGxB,KAAK,KAAK,CAAV,IAAeA,KAAK,KAAK,CAA5B,EAA+B;AAC3BoB,UAAAA,IAAI,CAACK,IAAL,CAAU;AACNC,YAAAA,KAAK,EAAEtC,IAAI,CAACsC,KAAL,GAAatC,IAAI,CAACsC,KAAlB,GAA0B,GAD3B;AAENjC,YAAAA,WAAW,EAAEL,IAAI,CAACK,WAAL,GAAmBL,IAAI,CAACK,WAAxB,GAAsC,GAF7C;AAGNkC,YAAAA,IAAI,EAAEvC,IAAI,CAACoC,OAAL,CAAaI,WAAb,CAAyBD,IAAzB,CAA8BA,IAA9B,GAAqCvC,IAAI,CAACoC,OAAL,CAAaI,WAAb,CAAyBD,IAAzB,CAA8BA,IAAnE,GAA0E,GAH1E;AAINjC,YAAAA,cAAc,EAAEN,IAAI,CAACM,cAAL,GAAsBN,IAAI,CAACM,cAA3B,GAA4C,GAJtD;AAKNkC,YAAAA,WAAW,EAAExC,IAAI,CAACoC,OAAL,CAAaI,WAAb,CAAyBA,WAAzB,GAAuCxC,IAAI,CAACoC,OAAL,CAAaI,WAAb,CAAyBA,WAAhE,GAA8E,GALrF;AAMNjC,YAAAA,aAAa,EAAEP,IAAI,CAACO,aAAL,GAAqBP,IAAI,CAACO,aAA1B,GAA0C,SANnD;AAONkC,YAAAA,UAAU,EAAE7B,KAAK,KAAK,CAAV,GAAc,EAAd;AAAA;AAAmB;AAAQ,cAAA,SAAS,EAAC,8BAAlB;AAAiD,cAAA,OAAO,EAAE,MAAM,KAAKW,SAAL,CAAevB,IAAf,CAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPzB,WAAV;AASH,SAVD,MAWI;AACAgC,UAAAA,IAAI,CAACK,IAAL,CAAU;AACNC,YAAAA,KAAK,EAAEtC,IAAI,CAACsC,KAAL,GAAatC,IAAI,CAACsC,KAAlB,GAA0B,GAD3B;AAENjC,YAAAA,WAAW,EAAEL,IAAI,CAACK,WAAL,GAAmBL,IAAI,CAACK,WAAxB,GAAsC,GAF7C;AAGNkC,YAAAA,IAAI,EAAEvC,IAAI,CAACoC,OAAL,CAAaI,WAAb,CAAyBD,IAAzB,CAA8BA,IAA9B,GAAqCvC,IAAI,CAACoC,OAAL,CAAaI,WAAb,CAAyBD,IAAzB,CAA8BA,IAAnE,GAA0E,GAH1E;AAINjC,YAAAA,cAAc,EAAEN,IAAI,CAACM,cAAL,GAAsBN,IAAI,CAACM,cAA3B,GAA4C,GAJtD;AAKNkC,YAAAA,WAAW,EAAExC,IAAI,CAACoC,OAAL,CAAaI,WAAb,CAAyBA,WAAzB,GAAuCxC,IAAI,CAACoC,OAAL,CAAaI,WAAb,CAAyBA,WAAhE,GAA8E,GALrF;AAMNjC,YAAAA,aAAa,EAAEP,IAAI,CAACO,aAAL,GAAqBP,IAAI,CAACO,aAA1B,GAA0C;AANnD,WAAV;AAQH;AACJ;AACJ,KAxBD;AA0BA,UAAMP,IAAI,GAAG;AACT+B,MAAAA,OADS;AAETC,MAAAA;AAFS,KAAb;AAKA;AAAA;AACI,0BAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,0BAAC,SAAD;AAAW,QAAA,KAAK,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,0BAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,0BAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,0BAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,0BAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,0BAAC,cAAD;AACI,QAAA,UAAU,MADd;AAEI,QAAA,QAAQ,MAFZ;AAGI,QAAA,cAAc,EAAE,IAHpB;AAII,QAAA,SAAS,EAAE,CAAC,EAAD,EAAK,GAAL,EAAU,IAAV,EAAgB,EAAhB,CAJf;AAKI,QAAA,IAAI,EAAEhC,IALV;AAMI,QAAA,SAAS,MANb;AAOI,QAAA,YAAY,EAAE,KAPlB;AAQI,QAAA,mBAAmB,EAAE,8BARzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,CADJ,EAeK,KAAKG,KAAL,CAAWc,KAAX;AAAA;AACG,0BAAC,eAAD;AAAiB,QAAA,QAAQ,EAAE,KAAKK,UAAhC;AAA4C,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWc,KAA9D;AAAqE,QAAA,aAAa,EAAE,KAAKQ,aAAzF;AAAwG,QAAA,IAAI,EAAE,KAAKtB,KAAL,CAAWH,IAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADH;AAAA;AACuI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAhB5I,CADJ,CADJ;AAAA;AAuBI,0BAAC,KAAD;AAAO,QAAA,MAAM,EAAE,KAAKG,KAAL,CAAWM,YAA1B;AAAwC,QAAA,MAAM,EAAE,KAAKiB,WAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI;AAAI,QAAA,SAAS,EAAC,kBAAd;AAAiC,QAAA,EAAE,EAAC,cAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDADJ;AAAA;AAEI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,OAAO,EAAE,MAAM,KAAKlB,QAAL,CAAc;AAAEC,UAAAA,YAAY,EAAE;AAAhB,SAAd,CAArC;AAA6E,QAAA,SAAS,EAAC,OAAvF;AAA+F,wBAAa,OAA5G;AAAoH,sBAAW,OAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI;AAAM,uBAAY,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CAFJ,CADJ;AAAA;AAOI,0BAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,0BAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,KAAK,EAAC,WAA5B;AAAwC,QAAA,OAAO,EAAG,MAAM,KAAKD,QAAL,CAAc;AAAEC,UAAAA,YAAY,EAAE;AAAhB,SAAd,CAAxD;AAA+F,QAAA,SAAS,EAAC,cAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ;AAAA;AAEI,0BAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,KAAK,EAAC,SAA5B;AAAsC,QAAA,SAAS,EAAC,0BAAhD;AAA2E,QAAA,OAAO,EAAE,KAAKV,eAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,CAPJ,CAvBJ,CADJ;AADJ;AAwCH;;AAvK+B;;AA0KpC,eAAeH,WAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Row, Col, Card, CardBody, Button, Modal, ModalFooter } from 'reactstrap';\nimport { MDBDataTableV5 } from 'mdbreact';\nimport { bienColumns } from './columnsData'\nimport { update_bien } from './../../helpers/fetch'\nimport ModalUpdateBien from './../Modals/modalUpdateBien'\n\nclass BienesTable extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            BienesData: props.Bienes,\n            Bienes: [],\n            modalConfirm: false,\n            confirm: false,\n            modal: false,\n            loading: false,\n\n            descripcion: '',\n            espacio_fisico: '',\n            observaciones: '',\n            idBien: '',\n            idEstado: '',\n\n            data: null,\n            idRolTable: '',\n            bien: null,\n        }\n        this.changeStateBien = this.changeStateBien.bind(this)\n        this.updateBien = this.updateBien.bind(this)\n        this.openModal = this.openModal.bind(this)\n        this.modalConfimation = this.modalConfimation.bind(this)\n        this.callbackModal = this.callbackModal.bind(this)\n        this.toggleModal = this.toggleModal.bind(this)\n    }\n\n    componentDidMount() {\n        const { Bienes } = this.props\n        this.setState({\n            Bienes\n        })\n    }\n\n    changeStateBien = async () => {\n        const { data, idRolTable, bien } = this.state;\n        if (idRolTable === 1) data.fk_estado = 7\n        data.descripcion = bien.descripcion\n        data.espacio_fisico = bien.espacio_fisico\n        data.observaciones = bien.observaciones\n\n        try {\n            this.setState({ modalConfirm: false })\n            await update_bien(data)\n            alert('Actualización correcta')\n            this.props.update(this.props.idRol)\n\n        } catch (er) {\n            alert('Error en el servidor')\n        }\n    }\n\n    async updateBien(dataForm) {\n        try {\n            await update_bien(dataForm)\n            this.props.update(this.props.idRol)\n            alert('Bien actualizado')\n        } catch {\n            alert('Error en el servidor')\n        }\n    }\n\n\n    openModal(data) {\n        this.setState(prevState => ({\n            modal: !prevState.modal,\n            data\n        }));\n    }\n\n    modalConfimation(data, idRol, bien) {\n        this.setState({ data, idRolTable: idRol, bien, modalConfirm: true })\n    }\n\n    callbackModal() {\n        this.setState({ modal: false });\n    }\n\n    toggleModal() {\n        this.setState(prevState => ({\n            modalConfirm: !prevState.modal\n        }));\n    }\n\n\n    render() {\n        const { idRol, Bienes } = this.props;\n        let columns = bienColumns\n        let rows = []\n\n        if (idRol === 4) {\n            columns = columns.slice(0, columns.length - 2)\n        }\n\n        Bienes.forEach(data => {\n            if (data.usuario) {\n                if(idRol === 1 || idRol === 2) {\n                    rows.push({\n                        placa: data.placa ? data.placa : '-',\n                        descripcion: data.descripcion ? data.descripcion : '-',\n                        sede: data.usuario.dependencia.sede.sede ? data.usuario.dependencia.sede.sede : '-',\n                        espacio_fisico: data.espacio_fisico ? data.espacio_fisico : '-',\n                        dependencia: data.usuario.dependencia.dependencia ? data.usuario.dependencia.dependencia : '-',\n                        observaciones: data.observaciones ? data.observaciones : 'Ninguna',\n                        actualizar: idRol === 4 ? '' : <button className=\"btn btn-primary rounded-pill\" onClick={() => this.openModal(data)}>Actualizar</button>\n                    })\n                }\n                else{\n                    rows.push({\n                        placa: data.placa ? data.placa : '-',\n                        descripcion: data.descripcion ? data.descripcion : '-',\n                        sede: data.usuario.dependencia.sede.sede ? data.usuario.dependencia.sede.sede : '-',\n                        espacio_fisico: data.espacio_fisico ? data.espacio_fisico : '-',\n                        dependencia: data.usuario.dependencia.dependencia ? data.usuario.dependencia.dependencia : '-',\n                        observaciones: data.observaciones ? data.observaciones : 'Ninguna',\n                    })\n                }\n            }\n        })\n\n        const data = {\n            columns,\n            rows,\n        }\n\n        return (\n            <React.Fragment>\n                <Container fluid>\n                    <Row>\n                        <Col>\n                            <Card>\n                                <CardBody>\n                                    <MDBDataTableV5\n                                        responsive\n                                        bordered\n                                        fullPagination={true}\n                                        infoLabel={['', '-', 'de', '']}\n                                        data={data}\n                                        searchTop\n                                        searchBottom={false}\n                                        noRecordsFoundLabel={'No se encontraron resultados'}\n                                    />\n                                </CardBody>\n                            </Card>\n                            {this.state.modal ?\n                                <ModalUpdateBien callback={this.updateBien} modal={this.state.modal} callbackModal={this.callbackModal} data={this.state.data} /> : <p></p>\n                            }\n                        </Col>\n                    </Row>                    \n\n                    <Modal isOpen={this.state.modalConfirm} toggle={this.toggleModal} >\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title mt-0\" id=\"confirmacion\">¿Estas seguro de realizar esta acción?</h5>\n                            <button type=\"button\" onClick={() => this.setState({ modalConfirm: false })} className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <ModalFooter>\n                            <Button type=\"button\" color=\"secondary\" onClick={ () => this.setState({ modalConfirm: false})} className=\"waves-effect\">Close</Button>\n                            <Button type=\"button\" color=\"primary\" className=\"waves-effect waves-light\" onClick={this.changeStateBien}>Confimar</Button>\n                        </ModalFooter>\n                    </Modal>\n                </Container>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default BienesTable;"]},"metadata":{},"sourceType":"module"}