{"ast":null,"code":"var _jsxFileName = \"/home/jorg/Downloads/REPOSITORIOS UD/proyecto_frontend_v0.7.0/gestion_inventarios_frontend-develop/src/pages/Traslado/trasladoDependencia.js\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col, Card, CardBody, Button, FormGroup, Modal, ModalFooter } from 'reactstrap';\nimport { activateAuthLayout } from '../../store/actions';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { AvForm, AvField } from 'availity-reactstrap-validation';\nimport { getBienesDependencia, getUserEncargadoDependencia, getDependencias, trasladoDependencia, trasladoBienes } from './../../helpers/fetch';\nimport { getLoggedInUser } from './../../helpers/authUtils';\nimport { getCargos } from './../../helpers/utils';\nimport TrasladoDependenciaTable from '../Tables/trasladoDependenciaTable';\nimport { createProcess } from './../../helpers/httpRequest';\n\nclass TrasladoDependencia extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      show: false,\n      user: getLoggedInUser(),\n      searchUser: null,\n      Bienes: [],\n      showSelect: false\n    };\n    this.submitId = this.submitId.bind(this);\n    this.submitTraslado = this.submitTraslado.bind(this);\n    this.toggleModal = this.toggleModal.bind(this);\n    this.handleSubmitForm = this.handleSubmitForm.bind(this);\n  }\n\n  async componentDidMount() {\n    const result = await getDependencias();\n\n    if (result.data) {\n      this.setState({\n        Dependencias: result.data.dependencia\n      });\n    }\n  }\n\n  async submitId(event, values) {\n    const {\n      user\n    } = this.state;\n\n    if (Number(user.id) === Number(values.id)) {\n      alert('El usuario que entrega no puede ser el mismo que recibe');\n      return;\n    }\n\n    const result = await getUserEncargadoDependencia({\n      idUsuario: values.id\n    });\n    if (result.data.encargado_dependencia.length === 0) alert('Este usuario no es un encargado de dependencia o no existe usuario');else {\n      const usuario = result.data.encargado_dependencia[0].usuario;\n      const idSede = Number(user.dependencia.sede.id);\n      const idDependencia = Number(user.dependencia.id);\n      const idRol = Number(user.auth.rol.id);\n      const res = await getBienesDependencia({\n        idSede,\n        idDependencia\n      }, idRol);\n      this.setState({\n        searchUser: {\n          funcionario: `${usuario.nombres} ${usuario.apellidos}`,\n          correo: usuario.correo,\n          cargo: usuario.cargos[0].cargo,\n          id: values.id\n        },\n        Bienes: res.data.bien,\n        show: true,\n        showSelect: true\n      });\n    }\n  }\n\n  toggleModal() {\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n  }\n\n  async handleSubmitForm() {\n    await this.setState({\n      modal: true\n    });\n  }\n\n  async submitTraslado() {\n    const {\n      searchUser,\n      Bienes,\n      user\n    } = this.state;\n\n    try {\n      await trasladoDependencia({\n        fk_dependencia: Number(user.dependencia.id),\n        fk_usuario: searchUser.id\n      });\n      await trasladoBienes({\n        fk_usuario: searchUser.id\n      }, Bienes);\n      await this.setState({\n        modal: false\n      });\n      let BienesId = [];\n      let cambios = [];\n      Bienes.map(async item => {\n        BienesId.push(item.id);\n        cambios.push({\n          id: item.id,\n          fk_usuario: user.id,\n          fk_estado: 1,\n          fk_dependencia: user.dependencia.id\n        });\n      });\n      const data = {\n        descripcion: \"Traslado de dependencia\",\n        razon: \"Usuario pidio realizar un traslado de dependencia\",\n        contratista: \"contratista\",\n        bienes: BienesId,\n        fk_usuario: user.id,\n        cambios: {\n          bienes: cambios\n        },\n        fk_tipo_solicitud: 6\n      };\n      await createProcess(data);\n      alert('Bienes trasladados correctamentes');\n      this.props.history.push('/');\n    } catch (error) {\n      alert('Error en el servidor');\n    }\n  }\n\n  render() {\n    const errorMessage = 'Campo requerido';\n    const {\n      user,\n      show,\n      searchUser,\n      Bienes,\n      showSelect\n    } = this.state;\n    return (\n      /*#__PURE__*/\n      React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"page-title-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Row, {\n        className: \"align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h4\", {\n        className: \"page-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 33\n        }\n      }, \"TRASLADO DE DEPENDENCIA\")))),\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 33\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 37\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"4\",\n        className: \"subtitulo-form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 41\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 45\n        }\n      }, \"Qui\\xE9n Entrega \"))),\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 37\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 41\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 45\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 48\n        }\n      }, \"Identificaci\\xF3n: \"), \" \", user.id)),\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 41\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 45\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 48\n        }\n      }, \"Funcionario: \"), \" \", user.nombres, \" \", user.apellidos)),\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 41\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 45\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 48\n        }\n      }, \"Correo: \"), \" \", user.correo)),\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 41\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 45\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 48\n        }\n      }, \"Cargo: \"), \" \", getCargos(user.cargos)))),\n      /*#__PURE__*/\n      React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 37\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 37\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"6\",\n        className: \"subtitulo-form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 41\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 45\n        }\n      }, \"Quien Recibe\"))),\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 37\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 41\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(AvForm, {\n        className: \"form-horizontal\",\n        inline: true,\n        onValidSubmit: this.submitId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 45\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 49\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(AvField, {\n        name: \"id\",\n        value: this.state.id,\n        disabled: show,\n        type: \"text\",\n        placeholder: \"Ingrese la Identificaci\\xF3n\",\n        label: \"Identificaci\\xF3n\",\n        validate: {\n          required: {\n            value: true,\n            errorMessage: errorMessage\n          },\n          pattern: {\n            value: '^[0-9]+$',\n            errorMessage: 'Solo valores númericos'\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 53\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Button, {\n        color: \"primary\",\n        className: \"w-md waves-effect waves-light\",\n        type: \"submit\",\n        grid: {\n          xs: 8\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 53\n        }\n      }, \"Buscar\"))))),\n      /*#__PURE__*/\n      React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 37\n        }\n      }), !showSelect ? '' :\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 41\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 45\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 49\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 53\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 57\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 60\n        }\n      }, \"Funcionario:\"), \" \", searchUser.funcionario)),\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 53\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 57\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 60\n        }\n      }, \"Correo:\"), \" \", searchUser.correo)),\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 53\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 57\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 60\n        }\n      }, \"Cargo:\"), \" \", searchUser.cargo))))), !show ? '' :\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 41\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 45\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 45\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        sm: \"6\",\n        className: \"subtitulo-form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 49\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 53\n        }\n      }, \"Dependencia\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 53\n        }\n      }, user.dependencia.dependencia)))),\n      /*#__PURE__*/\n      React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 37\n        }\n      }), !show ? '' : Bienes.length === 0 ? alert('No hay bienes en esta busqueda') :\n      /*#__PURE__*/\n      React.createElement(TrasladoDependenciaTable, {\n        Bienes: Bienes,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 49\n        }\n      }), !show ? '' : Bienes.length === 0 ? '' :\n      /*#__PURE__*/\n      React.createElement(Row, {\n        className: \"form-group m-t-20\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 49\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        md: \"12\",\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 53\n        }\n      }, this.state.loading ?\n      /*#__PURE__*/\n      React.createElement(Button, {\n        color: \"primary\",\n        className: \"w-md waves-effect waves-light\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 79\n        }\n      }, \"Cargando ...\") :\n      /*#__PURE__*/\n      React.createElement(Button, {\n        color: \"primary\",\n        className: \"w-md waves-effect waves-light\",\n        onClick: this.handleSubmitForm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 61\n        }\n      }, \"Realizar Traslado\"))))))),\n      /*#__PURE__*/\n      React.createElement(Modal, {\n        isOpen: this.state.modal,\n        toggle: this.toggleModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"modal-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h5\", {\n        className: \"modal-title mt-0\",\n        id: \"confirmacion\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 29\n        }\n      }, \"\\xBFEstas seguro de realizar esta acci\\xF3n?\"),\n      /*#__PURE__*/\n      React.createElement(\"button\", {\n        type: \"button\",\n        onClick: () => this.setState({\n          modal: false\n        }),\n        className: \"close\",\n        \"data-dismiss\": \"modal\",\n        \"aria-label\": \"Close\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 33\n        }\n      }, \"\\xD7\"))),\n      /*#__PURE__*/\n      React.createElement(ModalFooter, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Button, {\n        type: \"button\",\n        color: \"secondary\",\n        onClick: () => this.setState({\n          modal: false\n        }),\n        className: \"waves-effect\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 29\n        }\n      }, \"Close\"),\n      /*#__PURE__*/\n      React.createElement(Button, {\n        type: \"button\",\n        color: \"primary\",\n        className: \"waves-effect waves-light\",\n        onClick: this.submitTraslado,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 29\n        }\n      }, \"Confimar\")))))\n    );\n  }\n\n}\n\nexport default withRouter(connect(null, {\n  activateAuthLayout\n})(TrasladoDependencia));","map":{"version":3,"sources":["/home/jorg/Downloads/REPOSITORIOS UD/proyecto_frontend_v0.7.0/gestion_inventarios_frontend-develop/src/pages/Traslado/trasladoDependencia.js"],"names":["React","Component","Container","Row","Col","Card","CardBody","Button","FormGroup","Modal","ModalFooter","activateAuthLayout","withRouter","connect","AvForm","AvField","getBienesDependencia","getUserEncargadoDependencia","getDependencias","trasladoDependencia","trasladoBienes","getLoggedInUser","getCargos","TrasladoDependenciaTable","createProcess","TrasladoDependencia","constructor","props","state","loading","show","user","searchUser","Bienes","showSelect","submitId","bind","submitTraslado","toggleModal","handleSubmitForm","componentDidMount","result","data","setState","Dependencias","dependencia","event","values","Number","id","alert","idUsuario","encargado_dependencia","length","usuario","idSede","sede","idDependencia","idRol","auth","rol","res","funcionario","nombres","apellidos","correo","cargo","cargos","bien","prevState","modal","fk_dependencia","fk_usuario","BienesId","cambios","map","item","push","fk_estado","descripcion","razon","contratista","bienes","fk_tipo_solicitud","history","error","render","errorMessage","fontWeight","required","value","pattern","xs"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Row, Col, Card, CardBody, Button, FormGroup, Modal, ModalFooter } from 'reactstrap';\nimport { activateAuthLayout } from '../../store/actions';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { AvForm, AvField } from 'availity-reactstrap-validation';\nimport { \n    getBienesDependencia, getUserEncargadoDependencia, getDependencias, \n    trasladoDependencia, trasladoBienes  } from './../../helpers/fetch'\nimport { getLoggedInUser } from './../../helpers/authUtils'\nimport { getCargos } from './../../helpers/utils'\nimport TrasladoDependenciaTable from '../Tables/trasladoDependenciaTable';\nimport { createProcess } from './../../helpers/httpRequest'\n\n\nclass TrasladoDependencia extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            show: false,\n            user: getLoggedInUser(),\n            searchUser: null,\n            Bienes: [],\n            showSelect: false,\n        };\n\n        this.submitId = this.submitId.bind(this)\n        this.submitTraslado = this.submitTraslado.bind(this)\n        this.toggleModal = this.toggleModal.bind(this)\n        this.handleSubmitForm = this.handleSubmitForm.bind(this)\n    }\n\n    async componentDidMount() {\n        const result = await getDependencias()\n        if (result.data) {\n            this.setState({ Dependencias: result.data.dependencia })\n        }\n    }\n\n    async submitId(event, values) {\n        const { user } = this.state\n        if (Number(user.id) === Number(values.id)) {\n            alert('El usuario que entrega no puede ser el mismo que recibe')\n            return;\n        }\n        const result = await getUserEncargadoDependencia({ idUsuario: values.id })\n        if (result.data.encargado_dependencia.length === 0)\n            alert('Este usuario no es un encargado de dependencia o no existe usuario')\n        else {\n            const usuario = result.data.encargado_dependencia[0].usuario\n            const idSede = Number(user.dependencia.sede.id)\n            const idDependencia = Number(user.dependencia.id)\n            const idRol = Number(user.auth.rol.id)\n            const res = await getBienesDependencia({ idSede, idDependencia }, idRol)\n            this.setState({\n                searchUser: {\n                    funcionario: `${usuario.nombres} ${usuario.apellidos}`,\n                    correo: usuario.correo,\n                    cargo: usuario.cargos[0].cargo,\n                    id: values.id,\n                },\n                Bienes: res.data.bien,\n                show: true,\n                showSelect: true,\n            })\n        }\n    }\n\n    toggleModal() {\n        this.setState(prevState => ({\n            modal: !prevState.modal\n        }));\n    }\n\n    async handleSubmitForm() {\n        await this.setState({ modal: true})\n    }\n\n    async submitTraslado() {\n        const { searchUser, Bienes, user} = this.state;\n        try {\n            await trasladoDependencia({fk_dependencia: Number(user.dependencia.id), fk_usuario: searchUser.id})\n            await trasladoBienes({fk_usuario: searchUser.id}, Bienes)\n            await this.setState({ modal: false })\n            let BienesId = []\n            let cambios = []\n            Bienes.map( async item => {\n                BienesId.push(item.id)\n                cambios.push({ id: item.id, fk_usuario: user.id, fk_estado: 1, fk_dependencia: user.dependencia.id})\n            })\n            const data = {\n                descripcion: \"Traslado de dependencia\",\n                razon: \"Usuario pidio realizar un traslado de dependencia\",\n                contratista: \"contratista\",\n                bienes: BienesId,\n                fk_usuario: user.id,\n                cambios: {\n                    bienes: cambios\n                },\n                fk_tipo_solicitud: 6\n            }\n            await createProcess(data)\n            alert('Bienes trasladados correctamentes')\n            this.props.history.push('/');\n        } catch (error) {\n            alert('Error en el servidor')\n        }\n    }\n\n    render() {\n        const errorMessage = 'Campo requerido'\n        const { user, show, searchUser, Bienes, showSelect } = this.state;\n        return (\n            <React.Fragment>\n                <Container fluid>\n                    <div className=\"page-title-box\">\n                        <Row className=\"align-items-center\">\n                            <Col sm=\"12\">\n                                <h4 className=\"page-title\">TRASLADO DE DEPENDENCIA</h4>\n                            </Col>\n                        </Row>\n                    </div>\n                    <Row>\n                        <Col>\n                            <Card>\n                                <CardBody>\n                                    <Row>\n                                        <Col sm='4' className=\"subtitulo-form\">\n                                            <h5>Qui&eacute;n Entrega </h5>\n                                        </Col>\n                                    </Row>\n                                    <Row>\n                                        <Col sm='3'>\n                                            <p><span style={{ fontWeight: 'bold' }}>Identificaci&oacute;n: </span> {user.id}</p>\n                                        </Col>\n                                        <Col sm='3'>\n                                            <p><span style={{ fontWeight: 'bold' }}>Funcionario: </span> {user.nombres} {user.apellidos}</p>\n                                        </Col>\n                                        <Col sm='3'>\n                                            <p><span style={{ fontWeight: 'bold' }}>Correo: </span> {user.correo}</p>\n                                        </Col>\n                                        <Col sm='3'>\n                                            <p><span style={{ fontWeight: 'bold' }}>Cargo: </span> {getCargos(user.cargos)}</p>\n                                        </Col>\n                                    </Row>\n                                    <hr></hr>\n                                    <Row>\n                                        <Col sm='6' className=\"subtitulo-form\">\n                                            <h5>Quien Recibe</h5>\n                                        </Col>\n                                    </Row>\n                                    <Row>\n                                        <Col sm='6'>\n                                            <AvForm className=\"form-horizontal\" inline onValidSubmit={this.submitId}>\n                                                <FormGroup>\n                                                    <AvField name=\"id\" value={this.state.id} disabled={show} type=\"text\" placeholder=\"Ingrese la Identificaci&oacute;n\" label=\"Identificaci&oacute;n\" validate={{\n                                                        required: { value: true, errorMessage: errorMessage },\n                                                        pattern: { value: '^[0-9]+$', errorMessage: 'Solo valores númericos' },\n                                                    }} />\n\n                                                    <Button color=\"primary\" className=\"w-md waves-effect waves-light\" type=\"submit\" grid={{ xs: 8 }}>Buscar</Button>\n                                                </FormGroup>\n                                            </AvForm>\n                                        </Col>\n                                    </Row>\n                                    <br></br>\n                                    {   !showSelect ? '' :\n                                        <Row>\n                                            <Col sm='12'>\n                                                <Row>\n                                                    <Col sm='4'>\n                                                        <p><span style={{ fontWeight: 'bold' }}>Funcionario:</span> {searchUser.funcionario}</p>\n                                                    </Col>\n                                                    <Col sm='4'>\n                                                        <p><span style={{ fontWeight: 'bold' }}>Correo:</span> {searchUser.correo}</p>\n                                                    </Col>\n                                                    <Col sm='4'>\n                                                        <p><span style={{ fontWeight: 'bold' }}>Cargo:</span> {searchUser.cargo}</p>\n                                                    </Col>\n                                                </Row>\n                                            </Col>\n                                        </Row>\n                                    }\n                                    {\n                                        !show ? '' :\n                                        <div>\n                                            <hr></hr>\n                                            <Row>\n                                                <Col sm='6' className=\"subtitulo-form\">\n                                                    <h5>Dependencia</h5>\n                                                    <p>{user.dependencia.dependencia}</p>\n                                                </Col>\n                                            </Row>\n                                        </div>\n                                    }\n                                    <hr></hr>\n                                    {\n                                        !show ? '' :\n                                            Bienes.length === 0 ? alert('No hay bienes en esta busqueda') :\n                                                <TrasladoDependenciaTable Bienes={Bienes} />        \n                                    }\n                                    {\n                                        !show ? '' :\n                                            Bienes.length === 0 ? '' :\n                                                <Row className=\"form-group m-t-20\">\n                                                    <Col md=\"12\" className=\"text-right\">\n                                                        {this.state.loading ? <Button color=\"primary\" className=\"w-md waves-effect waves-light\">Cargando ...</Button> :\n                                                            <Button color=\"primary\" className=\"w-md waves-effect waves-light\" onClick={this.handleSubmitForm}>Realizar Traslado</Button>}\n                                                    </Col>\n                                                </Row>\n                                    }\n                                </CardBody>\n                            </Card>\n                        </Col>\n                    </Row>\n                    <Modal isOpen={this.state.modal} toggle={this.toggleModal} >\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title mt-0\" id=\"confirmacion\">¿Estas seguro de realizar esta acción?</h5>\n                            <button type=\"button\" onClick={() => this.setState({ modal: false })} className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <ModalFooter>\n                            <Button type=\"button\" color=\"secondary\" onClick={ () => this.setState({ modal: false})} className=\"waves-effect\">Close</Button>\n                            <Button type=\"button\" color=\"primary\" className=\"waves-effect waves-light\" onClick={this.submitTraslado}>Confimar</Button>\n                        </ModalFooter>\n                    </Modal>\n                </Container>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default withRouter(connect(null, { activateAuthLayout })(TrasladoDependencia));"]},"metadata":{},"sourceType":"module"}